{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}

<!-- ========================= SECTION CONTENT ========================= -->
<section class="section-content padding-y" style="min-height:84vh">

  <!-- ============================ COMPONENT LOGIN   ================================= -->
  <div class="card mx-auto" style="max-width: 380px; margin-top:100px;">
    <div class="card-body">

      <h4 class="card-title mb-4">Вход в аккаунт</h4>

      <!-- Messages Block -->
      {% if messages %}
      <div class="mb-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show d-flex align-items-center" role="alert" style="font-size: 1rem;">
          <div class="flex-grow-1">{{ message }}</div>
          <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Закрыть"></button>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Login Form -->
      <form method="post" action="">
        {% csrf_token %}

        <div class="form-group mb-3">
          <label for="id_email" class="form-label">Электронная почта</label>
          <input 
            type="email" 
            name="email" 
            id="id_email" 
            class="form-control" 
            placeholder="Введите email" 
            value="{{ request.POST.email|default:'' }}" 
            required 
            autofocus
          >
        </div>

        <div class="form-group mb-3">
          <label for="id_password" class="form-label">Пароль</label>
          <input 
            type="password" 
            name="password" 
            id="id_password" 
            class="form-control" 
            placeholder="Введите пароль" 
            required
          >
        </div>

        <div class="form-group mb-3">
          <a href="{% url 'forgot_password' %}" class="float-end">Забыли пароль?</a>
        </div>

        <div class="form-group">
          <button type="submit" class="btn btn-primary btn-block w-100">Войти</button>
        </div>
      </form>

    </div> <!-- card-body -->
  </div> <!-- card -->

  <!-- Register Link -->
  <p class="text-center mt-4">
    Нет аккаунта? <a href="{% url 'register' %}">Зарегистрироваться</a>
  </p>

  <br><br>

</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

<!-- Auto-dismiss messages -->
<script>
  // Авто-скрытие уведомлений через 4 секунды
  setTimeout(function() {
    var alerts = document.querySelectorAll('.alert');
    alerts.forEach(function(alert) {
      alert.classList.remove('show');
      alert.classList.add('fade');
    });
  }, 10000);
</script>

{% endblock %}
